BLUEKING.wallpaper=function(){return{init:function(){BLUEKING.wallpaper.get(function(){BLUEKING.wallpaper.set()})},get:function(e){$.ajax({type:"POST",url:urlPrefix+"get_wallpaper/",success:function(a){var p=a.split("<{|}>");switch(BLUEKING.CONFIG.wallpaperState=parseInt(p[0]),BLUEKING.CONFIG.wallpaperState){case 1:case 2:BLUEKING.CONFIG.wallpaper=p[1],BLUEKING.CONFIG.wallpaperType=p[2],BLUEKING.CONFIG.wallpaperWidth=parseInt(p[3]),BLUEKING.CONFIG.wallpaperHeight=parseInt(p[4]);break;case 3:BLUEKING.CONFIG.wallpaper=p[1]}e&&e()}})},set:function(e){var e=void 0===e||e;if(e){var a=500;try{if($.browser.msie)var a=0}catch(e){}$("#zoomWallpaperGrid").attr("id","zoomWallpaperGrid-ready2remove").css("zIndex",-11),setTimeout(function(){$("#zoomWallpaperGrid-ready2remove").remove(),$("#zoomWallpaperGrid").removeClass("radi")},a)}var p=$(window).width(),i=$(window).height();switch(BLUEKING.CONFIG.wallpaperState){case 1:case 2:var t=new Date,l=t.getFullYear()+""+(t.getMonth()+1)+t.getDate(),o=BLUEKING.CONFIG.wallpaper+"?v="+l;switch(BLUEKING.CONFIG.wallpaperType){case"pingpu":e&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;background:#fff url('+o+') repeat"></div>');break;case"juzhong":e&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;background:#fff url('+o+') no-repeat 50% 50%"></div>');break;case"tianchong":var r=(i-BLUEKING.CONFIG.wallpaperHeight)/2,d=(p-BLUEKING.CONFIG.wallpaperWidth)/2;e?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+p+'px;background:#fff"><img id="zoomWallpaper" src="'+o+'" style="position:absolute;height:'+BLUEKING.CONFIG.wallpaperHeight+"px;width:"+BLUEKING.CONFIG.wallpaperWidth+"px;top:"+r+"px;left:"+d+'px"><div style="position:absolute;height:'+i+"px;width:"+p+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"></div></div>'):($("#zoomWallpaperGrid, #zoomWallpaperGrid div").css({height:i+"px",width:p+"px"}),$("#zoomWallpaper").css({top:r+"px",left:d+"px"}));break;case"shiying":var s,h,r,d;BLUEKING.CONFIG.wallpaperHeight/BLUEKING.CONFIG.wallpaperWidth>i/p?(s=i,h=BLUEKING.CONFIG.wallpaperWidth*(i/BLUEKING.CONFIG.wallpaperHeight),r=0,d=(p-h)/2):BLUEKING.CONFIG.wallpaperHeight/BLUEKING.CONFIG.wallpaperWidth<i/p?(h=p,s=BLUEKING.CONFIG.wallpaperHeight*(p/BLUEKING.CONFIG.wallpaperWidth),d=0,r=(i-s)/2):(s=BLUEKING.CONFIG.wallpaperHeight,h=BLUEKING.CONFIG.wallpaperWidth,r=d=0),e?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+p+'px;background:#fff"><img id="zoomWallpaper" src="'+o+'" style="position:absolute;height:'+s+"px;width:"+h+"px;top:"+r+"px;left:"+d+'px"><div style="position:absolute;height:'+i+"px;width:"+p+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"></div></div>'):($("#zoomWallpaperGrid, #zoomWallpaperGrid div").css({height:i+"px",width:p+"px"}),$("#zoomWallpaper").css({height:s+"px",width:h+"px",top:r+"px",left:d+"px"}));break;case"lashen":e?$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;left:0;top:0;overflow:hidden;height:'+i+"px;width:"+p+'px;background:#fff"><img id="zoomWallpaper" src="'+o+'" style="position:absolute;height:'+i+"px;width:"+p+'px;top:0;left:0"><div style="position:absolute;height:'+i+"px;width:"+p+'px;background:#fff;opacity:0;filter:alpha(opacity=0)"></div></div>'):$("#zoomWallpaperGrid").css({height:i+"px",width:p+"px"}).children("#zoomWallpaper, div").css({height:i+"px",width:p+"px"})}break;case 3:e&&$("body").append('<div id="zoomWallpaperGrid" class="radi" style="position:absolute;z-index:-10;top:0;left:0;height:100%;width:100%;overflow:hidden"><div></div><iframe id="iframeWallpaper" frameborder="no" border="0" scrolling="no" class="iframeWallpaper" style="position:absolute;left:0;top:0;overflow:hidden;width:100%;height:100%" src="'+o+'"></iframe></div>')}},update:function(e,a,p){$.ajax({type:"POST",url:urlPrefix+"set_wallpaper/",data:"wpstate="+e+"&wptype="+a+"&wp="+p,success:function(){BLUEKING.wallpaper.get(function(){BLUEKING.wallpaper.set()})}})}}}();