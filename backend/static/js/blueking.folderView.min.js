BLUEKING.folderView=function(){return{init:function(){$("body").on("click",".quick_view_container",function(){BLUEKING.popupMenu.hide()}).on("click",".quick_view_container_open",function(){BLUEKING.window.create($(this).parents(".quick_view_container").attr("appid")),BLUEKING.folderView.hide()}).on("click",".appbtn",function(){BLUEKING.popupMenu.hide(),BLUEKING.folderView.hide(),BLUEKING.searchbar.hide(),BLUEKING.docktool.hide()}),BLUEKING.folderView.moveScrollbar()},get:function(t){setTimeout(function(){var i=!1;if($("body .quick_view_container").each(function(){if($(this).attr("appid")==t.attr("appid"))return i=!0,!1}),i)var e="#qv_"+t.attr("appid");else BLUEKING.folderView.hide();var n="";$(BLUEKING.VAR.folder).each(function(){if(this.appid==t.attr("appid"))return n=this.apps,!1});var o="",a=0;""!=n?($(n).each(function(){o+=appbtnTemp({title:this.name,name:this.name,type:this.type,id:"d_"+this.appid,appid:this.appid,code:this.app_code,imgsrc:this.icon,isoutline:this.isoutline,islapp:this.islapp})}),n.length%4==0?a+=60*Math.floor(n.length/4):a+=60*(Math.floor(n.length/4)+1)):(o=gettext("文件夹为空"),a+=30);var p,r;t.parent("div").hasClass("dock-applist")?(p=parseInt(t.attr("left"))+t.width(),r=parseInt(t.attr("top"))):(p=parseInt(t.attr("left"))+t.width(),r=parseInt(t.attr("top"))-20);var c=!1;if(a+r+44>$(window).height()){var h=a+r+44-$(window).height();h<=r?r-=h:(a-=h-r,r=0,c=!0)}p+330>$(window).width()?(p-=330+t.width(),i?($(e+" .quick_view_container_list_in").html("").append(o),$(e).stop(!0,!1).animate({left:p,top:r},500),$(e+" .perfect_nine_m_l_t").stop(!0,!1).animate({top:0,height:Math.ceil((a+24)/2)},200),$(e+" .perfect_nine_m_l_m").stop(!0,!1).animate({top:Math.ceil((a+24)/2)},200).hide(),$(e+" .perfect_nine_m_l_b").stop(!0,!1).animate({top:Math.ceil((a+24)/2),height:Math.ceil((a+24)/2)+20},200),$(e+" .perfect_nine_m_r_t").stop(!0,!1).animate({top:0,height:t.offset().top-r},200),$(e+" .perfect_nine_m_r_m").stop(!0,!1).animate({top:parseInt(t.attr("top"))-r},200).show(),$(e+" .perfect_nine_m_r_b").stop(!0,!1).animate({top:parseInt(t.attr("top"))-r+20,height:a+24-(parseInt(t.attr("top"))-r)-20+20},200),$(e+" .quick_view_container_list_in").stop(!0,!1).animate({height:a},200)):$("body").append(folderViewTemp({id:"qv_"+t.attr("appid"),appid:t.attr("appid"),apps:o,top:r,left:p,height:a,mlt:Math.ceil((a+24)/2),mlm:!1,mlb:Math.ceil((a+24)/2),mrt:t.offset().top-r,mrm:!0,mrb:a+24-(t.offset().top-r)-20}))):i?($(e+" .quick_view_container_list_in").html("").append(o),$(e).stop(!0,!1).animate({left:p,top:r},500),$(e+" .perfect_nine_m_l_t").stop(!0,!1).animate({top:0,height:parseInt(t.attr("top"))-r},200),$(e+" .perfect_nine_m_l_m").stop(!0,!1).animate({top:parseInt(t.attr("top"))-r},200).show(),$(e+" .perfect_nine_m_l_b").stop(!0,!1).animate({top:parseInt(t.attr("top"))-r+20,height:a+24-(parseInt(t.attr("top"))-r)-20},200),$(e+" .perfect_nine_m_r_t").stop(!0,!1).animate({top:0,height:Math.ceil((a+24)/2)},200),$(e+" .perfect_nine_m_r_m").stop(!0,!1).animate({top:Math.ceil((a+24)/2)},200).hide(),$(e+" .perfect_nine_m_r_b").stop(!0,!1).animate({top:Math.ceil((a+24)/2),height:Math.ceil((a+24)/2)},200),$(e+" .quick_view_container_list_in").stop(!0,!1).animate({height:a},200)):$("body").append(folderViewTemp({id:"qv_"+t.attr("appid"),appid:t.attr("appid"),apps:o,top:r,left:p,height:a,mlt:t.offset().top-r,mlm:!0,mlb:a+24-(t.offset().top-r)-20,mrt:Math.ceil((a+24)/2),mrm:!1,mrb:Math.ceil((a+24)/2)}));var _="#quick_view_container_list_in_"+t.attr("appid"),l="#quick_view_container_list_"+t.attr("appid")+" .scrollBar";$("#quick_view_container_list_"+t.attr("appid")+" .scrollBar_bgc").hide(),$(l).hide().height(0),c&&($("#quick_view_container_list_"+t.attr("appid")+" .scrollBar_bgc").show(),$(l).show().height($(_).height()/(60*Math.ceil($(_).children().length/4))*$(_).height()))},0)},setPos:function(){$("body .quick_view_container").each(function(){BLUEKING.folderView.get($("#d_"+$(this).attr("appid")))})},moveScrollbar:function(){$("body").on("mousedown",".quick_view_container .quick_view_container_list .scrollBar",function(t){var i,e,n,o,a=$(this),p=a.prev(".quick_view_container_list_in"),r=p.offset().top;n=60*Math.ceil(p.children().length/4),o=p.height()-a.height(),i=t.clientY-a.offset().top,$(document).on("mousemove",function(t){e=t.clientY-i-r<0?0:t.clientY-i-r>o?o:t.clientY-i-r,a.css("top",e),p.scrollTop(e/p.height()*n)}).on("mouseup",function(){$(this).off("mousemove").off("mouseup")})}),$("body").on("mousewheel",".quick_view_container_list_in",function(t,i){var e,n=$(this),o=60*Math.ceil($(this).children().length/4);e=i<0?n.scrollTop()+40>o-n.height()?o-n.height():n.scrollTop()+40:n.scrollTop()-40<0?0:n.scrollTop()-40,n.stop(!1,!0).animate({scrollTop:e},300),$(this).next(".scrollBar").stop(!1,!0).animate({top:e/o*n.height()},300)})},hide:function(){$(".quick_view_container").remove()}}}();